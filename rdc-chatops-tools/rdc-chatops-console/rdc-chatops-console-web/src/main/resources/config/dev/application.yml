## [APP]
spring:
  application:
    name: rdc-chatops-console-web
  profiles:
    active: dev
  jackson:
    property-naming-strategy: LOWER_CAMEL_CASE
  datasource:
      url: jdbc:mysql://192.168.254.246:3308/devops?autoReconnect=true&useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull
      username: root
      password: hsd_dev
      filters: log4j,wall,mergeStat
  mvc:
    static-path-pattern: /static/**
    view:
      prefix: /WEB-INF/view
  http:
    multipart:
      max-request-size: 100MB #最大请求大小
      max-file-size: 100MB #最大文件大小
  devtools:
    restart:
      enabled: false #是否开启开发者工具（true/false）
      additional-paths: src/main/java
      exclude: static/**,WEB-INF/view/**
  aop:
    proxy-target-class: true #false为启用jdk默认动态代理,true为cglib动态代理
  redis:
    host: 192.168.254.246
    port: 6379
    password:

server:
  port: 8060


## [EUREKA]
eureka:
  instance:
    preferIpAddress: true
    instance-id: ${spring.cloud.client.ipAddress}:${server.port}
#    lease-renewal-interval-in-seconds: 10 # 续约到期时间（默认90秒）
#    lease-expiration-duration-in-seconds: 30 # 续约更新时间间隔（默认30秒）
  client:
    registerWithEureka: true #服务注册
    fetchRegistry: true #服务获取
    serviceUrl:
      defaultZone: http://${security.user.name}:${security.user.password}@localhost:5001/eureka/
    healthcheck:
      enabled: true # 开启健康检查（需要spring-boot-starter-actuator依赖

## [MYBATIES-PLUS]
mybatis-plus:
  mapper-locations: classpath*:mapping/*.xml
  typeAliasesPackage: com.hsd.devops.common.persistence.model
  global-config:
    id-type: 0  #0:数据库ID自增   1:用户输入id  2:全局唯一id(IdWorker)  3:全局唯一ID(uuid)
    db-column-underline: false
    refresh-mapper: true
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: true #配置的缓存的全局开关
    lazyLoadingEnabled: true #延时加载的开关
    multipleResultSetsEnabled: true #开启的话，延时加载一个属性时会加载该对象全部属性，否则按需加载属性
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl #打印sql语句,调试用


## [SECURITY]
security:
     basic:
       enabled: false
     user:
       name: admin
       password: admin

## [ZUUL]
zuul:
  sensitiveHeaders: Access-Control-Allow-Origin,Access-Control-Allow-Methods,Access-Control-Allow-Headers
  cross:
    origin: "*"
    methods: "POST, GET, OPTIONS, PUT, DELETE, HEAD"
    headers: "Origin,Authorization,Cache-Control,Content-Language,Content-Type,Expires,Last-Modified,Pragma,X-Cache"
  max:
    host:
      connections: 500
  host:
    socket-timeout-millis: 60000
    connect-timeout-millis: 60000
#  ignored-services: "*"
#  routes:
#    product:
#      path: /product/**
#      url: http://product:9001/product

## [HYSTRIX]
hystrix:
  command:
    default:
      execution:
        timeout:
          enabled: true
        isolation:
          thread:
            timeoutInMilliseconds: 60000
  stream:
    maxConcurrentConnections: 20
    bus:
      enabled: true


## [RIBBON]
ribbon:
  ReadTimeout: 60000
  ConnectTimeout: 60000
  MaxAutoRetries: 0
  MaxAutoRetriesNextServer: 1
  eureka:
    enabled: true
  okhttp:
      enabled: true


## [ENDPOINTS]
endpoints:
  restart:
    enabled: true
  shutdown:
    enabled: true
  health:
    sensitive: false
  cors:
    allowed-methods: HEAD,GET,POST


## [MANAGEMENT]
management:
  security:
    enabled: false

## [LOG]
logging:
  level.root: debug
  path: ./logs/hsd-gitlab-hooks-web   # not working this moment, since logback-spring will be first used by

## [INFO]
info:
  name: "@project.name@"
  description: "@project.description@"
  version: "@project.version@"
  spring-boot-version: "@project.parent.version@"

## [OTHER]
feign:
  client:
    name: ${spring.application.name}
  okhttp:
    enabled: true
  hystrix:
    enabled: true

hsd:
  common:
    appPrefix: dev_   #指定app前缀（开发中可使用IP），系统在队列名、Cache名等前会自动加上前缀，以便不同环境冲突

swagger:
  swagger-open: true


###################  devops配置  ###################
devops:
  swagger-open: true #是否开启swagger (true/false)
  kaptcha-open: false #是否开启登录时验证码 (true/false)
  session-open: false #是否开启session超时验证（受影响的类SessionTimeoutInterceptor） (true/false)
  #file-upload-path: d:/tmp  #文件上传目录(不配置的话为java.io.tmpdir目录)
  muti-datasource-open: false #是否开启多数据源(true/false)
  spring-session-open: false #是否开启spring session,如果是多机环境需要开启(true/false)
  session-invalidate-time: 1800 #session失效时间(只在单机环境下生效，多机环境在SpringSessionConfig类中配置) 单位：秒
  session-validation-interval: 900 #多久检测一次失效的session(只在单机环境下生效) 单位：秒


###################  beetl配置  ###################
beetl:
  delimiter-statement-start: \@   #开始结束标签(yaml不允许@开头)
  delimiter-statement-end: null
  resource-tagroot: common/tags   #自定义标签文件Root目录和后缀
  resource-tagsuffix: tag
  resource-auto-check: true #是否检测文件变化,开发用true合适，但线上要改为false